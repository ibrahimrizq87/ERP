<div class="mt-3 mb-3">
    <h5>Manage Transactions</h5>
    <span class="text-muted">Dashboard <i class="fa-solid fa-angle-right"></i> Transactions <i class="fa-solid fa-angle-right"></i> Create Transaction</span>
  </div>
  
  <div class="mt-4 mb-4">
    <form [formGroup]="transactionForm" (ngSubmit)="handleForm()">
      <div class="container">
        <div class="row">
          <div class="col-md-12">
            <div class="card shadow em-card rounded-lg">
              <div class="card-header bg-white text-black rounded-top pt-3">
                <h5>Create a New Transaction</h5>
              </div>
  
              <div class="card-body pb-5">
                <div class="row">
                  <!-- Amount -->
                  <div class="form-group col-md-6">
                    <label for="amount" class="form-label">Amount</label>
                    <input
                      id="amount"
                      formControlName="amount"
                      type="number"
                      step="0.01"
                      class="form-control"
                      placeholder="Enter amount"
                    />
                    <div
                      class="alert alert-danger"
                      *ngIf="transactionForm.get('amount')?.errors && transactionForm.get('amount')?.touched"
                    >
                      <p *ngIf="transactionForm.get('amount')?.hasError('required')">Amount is required</p>
                      <p *ngIf="transactionForm.get('amount')?.hasError('min')">Amount must be non-negative</p>
                    </div>
                  </div>
  
                  <!-- Type -->
                  <div class="form-group col-md-6">
                    <label for="type" class="form-label">Type</label>
                    <select
                      id="type"
                      formControlName="type"
                      class="form-control"
                    >
                      <option value="" disabled>Select type</option>
                      <option value="payment">Payment</option>
                      <option value="receipt">Receipt</option>
                    </select>
                    <div
                      class="alert alert-danger"
                      *ngIf="transactionForm.get('type')?.errors && transactionForm.get('type')?.touched"
                    >
                      <p *ngIf="transactionForm.get('type')?.hasError('required')">Type is required</p>
                      <p *ngIf="transactionForm.get('type')?.hasError('in')">Type must be either 'payment' or 'receipt'</p>
                    </div>
                  </div>
  
                  <!-- Receiver Name -->
                  <div class="form-group col-md-6">
                    <label for="receiver_name" class="form-label">Receiver Name</label>
                    <input
                      id="receiver_name"
                      formControlName="receiver_name"
                      type="text"
                      class="form-control"
                      placeholder="Enter receiver name"
                    />
                    <div
                      class="alert alert-danger"
                      *ngIf="transactionForm.get('receiver_name')?.errors && transactionForm.get('receiver_name')?.touched"
                    >
                      <p *ngIf="transactionForm.get('receiver_name')?.hasError('required')">Receiver name is required</p>
                      <p *ngIf="transactionForm.get('receiver_name')?.hasError('maxLength')">Max length is 255</p>
                    </div>
                  </div>
  
                  <!-- Company Account -->
                  <div class="form-group col-md-6">
                    <label for="company_account_id" class="form-label">Company Account</label>
                    <select
                      id="company_account_id"
                      formControlName="company_account_id"
                      class="form-control"
                    >
                      <option value="" disabled>Select company account</option>
                      <!-- Populate dynamically -->
                      <option *ngFor="let account of companyAccounts" [value]="account.id">{{ account.name }}</option>
                    </select>
                    <div
                      class="alert alert-danger"
                      *ngIf="transactionForm.get('company_account_id')?.errors && transactionForm.get('company_account_id')?.touched"
                    >
                      <p *ngIf="transactionForm.get('company_account_id')?.hasError('required')">Company account is required</p>
                      <p *ngIf="transactionForm.get('company_account_id')?.hasError('exists')">Invalid company account</p>
                    </div>
                  </div>
  

                  <div class="form-group col-md-6">
                    <label for="customer_account_id" class="form-label">Customer Account</label>
                    <select
                      id="customer_account_id"
                      formControlName="customer_account_id"
                      class="form-control"
                    >
                      <option value="" disabled>Select customer account</option>

                      <option *ngFor="let account of customerAccounts" [value]="account.id">{{ account.name}}</option>
                    </select>
                    <div
                      class="alert alert-danger"
                      *ngIf="transactionForm.get('customer_account_id')?.errors && transactionForm.get('customer_account_id')?.touched"
                    >
                      <p *ngIf="transactionForm.get('customer_account_id')?.hasError('required')">Customer account is required</p>
                      <p *ngIf="transactionForm.get('customer_account_id')?.hasError('exists')">Invalid customer account</p>
                    </div>
                  </div>
  

                  <div class="form-group col-md-6">
                    <label for="image" class="form-label">Upload Image</label>
                    <input
                      id="image"
                      formControlName="image"
                      type="file"
                      class="form-control"
                      accept=".jpeg, .png, .jpg, .gif"
                    />
                    <div
                      class="alert alert-danger"
                      *ngIf="transactionForm.get('image')?.errors && transactionForm.get('image')?.touched"
                    >
                      <p *ngIf="transactionForm.get('image')?.hasError('max')">Max file size is 2MB</p>
                      <p *ngIf="transactionForm.get('image')?.hasError('mimes')">Invalid file type</p>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
  

          <div class="mt-4 mb-4">
            <button [disabled]="transactionForm.invalid" type="submit" class="btn btn-primary px-4">
              <i *ngIf="isLoading" class="fas fa-spinner fa-spin"></i> Submit
            </button>
          </div>
        </div>
      </div>
    </form>
  </div>
  